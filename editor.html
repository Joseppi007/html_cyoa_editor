<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>CYOA Engine</title>
    <link rel="stylesheet" href="style.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Audiowide|Anton+SC">
    <script src="script.js"></script>
  </head>
  <body>
    <div class="header">
      <div>
	<button onclick="open_file_menu();">File</button>
	<button onclick="story_edit();">Edit</button>
	<button onclick="story_start();">Play</button>
	<button onclick="story_start(special_story_data.help);">Help</button>
	<button onclick="options_modal.showModal();">Options</button>
      </div>
    </div>
    <dialog aria-modal="true" id="file_menu">
      <button class="close" onclick="file_menu.close();">&times;</button>
      <h1>File</h1>
      <p>Save your story to a <span class="mono">.JSON</span> file or load a <span class="mono">.JSON</span> file.<br/>I thought about having a whole file manipulation piece of code, but then I remembered you can probably just copy/paste from the below textarea.</p>
      <textarea id="story_data_json" onchange="story_data=JSON.parse(this.value);" style="width:90%;height:50%;"></textarea>
    </dialog>
    <dialog aria-modal="true" id="story_modal" class="hidden-overflow" onmousedown="baseDelay=0;" onmouseup="baseDelay=baseBaseDelay;" ontouchstart="baseDelay=0;" ontouchend="baseDelay=baseBaseDelay;">
      <button class="close" onclick="story_modal.close();">&times;</button>
      <div id="story_div" class="scroll-overflow" style="height: calc(100% - 3em); width: calc(100% - 2em);">
	This is a placeholder.
      </div>
      <div class="footer" style="font-size: 1.2em; padding: 0px; margin: 0px;">
	<div id="story_footer">
	  <button>test</button><button>test</button>
	</div>
      </div>
    </dialog>
    <dialog aria-modal="true" id="page_list_modal" class="hidden-overflow">
      <button class="close" onclick="page_list_modal.close();">&times;</button>
      <div id="page_list_div" class="scroll-overflow" style="height: 100%;">
	<h1>Page List</h1>
	<p>
	  This is a list of all of the pages in the story. Select a page to choose an action to do with it, including reading starting from that page, setting it to the first page of the story, removing it, or editing it.<br/>
	  Note that there are also special pages, such as the <i>Title Page</i> and <i>List of Image Links Page</i>.
	</p>
	<ul class="vert-button-list" id="page_list">
	</ul>
      </div>
    </dialog>
    <dialog aria-modal="true" id="page_options_modal" class="hidden-overflow">
      <button class="close" onclick="page_options_modal.close();">&times;</button>
      <h1>Page Options</h1>
      <p>
	What would you like to do with this page?
      </p>
      <ul class="vert-button-list">
	<li><button onclick="edit_page(selected_page);">Edit</button></li>
	<li><button onclick="read_page(selected_page);">Read From Here</button></li>
	<li><button onclick="make_first_page(selected_page);">Make This The First Page</button></li>
	<li><button onclick="delete_page(selected_page);close_modals();" class="danger">Delete This Page</button></li>
      </ul>
    </dialog>
    <dialog aria-modal="true" id="edit_modal" class="hidden-overflow">
      <button class="close" onclick="edit_modal.close();">&times;</button>
      <div id="edit_div" class="scroll-overflow" style="height: 100%;">
	<h1>Page Name: <input id="page_name_input" style="font-size:1em;" onchange="save_edit();"/></h1>
	<p>Text on the Page:</p>
	<textarea id="page_text_input" style="width:90%;height:50%;" onchange="save_edit();"></textarea>
	<p>Option buttons, formatted as:<br/><span class="mono">Page Name:Option Text,Page Name:Option Text</span><br/>â€¦or in other words, each option is seperated by a comma, and the options are divided into two pieces: The page it goes to and the text displayed for the option. These parts are seperated by a colon.</p>
	<textarea id="page_buttons_input" style="width:90%;" onchange="save_edit();"></textarea></br>
	<!--<button onclick="save_edit();">Save Changes</button>-->
      </div>
    </dialog>
    <dialog aria-modal="true" id="title_edit_modal" class="hidden-overflow">
      <button class="close" onclick="title_edit_modal.close();">&times;</button>
      <div id="edit_div" class="scroll-overflow" style="height: 100%;">
	<h1>Title: <input id="title_page_title_input" style="font-size:1em;" onchange="save_edit_title();"/></h1>
	<p>Author: <input id="title_page_author_input" style="font-size:1em;" onchange="save_edit_title();"/></p>
	<p>Description:</p>
	<textarea id="title_page_description_input" style="width:90%;height:50%;" onchange="save_edit_title();"></textarea>
	<!--<button onclick="save_edit_title();">Save Changes</button>-->
      </div>
    </dialog>
    <dialog aria-modal="true" id="options_modal" class="hidden-overflow">
      <button class="close" onclick="options_modal.close();">&times;</button>
      <div id="options_div" class="scroll-overflow" style="height: 100%;">
	<button onclick="figure_out_theme('light');">Light Mode</button><br/>
	<button onclick="figure_out_theme('dark');">Dark Mode</button><br/>
	<button onclick="figure_out_theme('high contrast');">High Contrast Mode</button><br/>
	<button onclick="figure_out_theme('haxor');" class="audiowide">H4X0R Mode</button><br/>
	<input type="checkbox" onclick="if(this.checked){baseBaseDelay=10;}else{baseBaseDelay=0;}baseDelay=baseBaseDelay;" id="type_effect_check_box"><label>Type Effect</label>
	<script>if(type_effect_check_box.checked){baseBaseDelay=10;}else{baseBaseDelay=0;}baseDelay=baseBaseDelay;</script>
      </div>
    </dialog>
    <dialog aria-modal="true" id="image_links_edit_modal">
      <button class="close" onclick="image_links_edit_modal.close();">&times;</button>
      <h1>Image Links</h1>
      <p>Please format the image links as <i>Reference Name</i>:<i>Link</i><br/>The reference name is used when making scenes or placing characters in scenes.</p>
      <textarea id="image_links_edit_input" onchange="save_edit_image_links(this.value);" style="width:90%;height:50%;"></textarea>
    </dialog>
    <script>figure_out_theme();</script>
  </body>
</html>
